<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">
    <title>Examples â€¢ Island</title>
    <link rel="stylesheet" href="style.css"/>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.js"></script>
    <script src="boids.js"></script>
    <script src="hotreload.js"></script>
  </head>
  <body>
    <a-scene id="scene">
      <!-- Camera -->
      <a-entity id="rig"
        movement-controls
        position="3 3.4 7">
        <a-entity id="camera"
          camera
          position="0 1.6 0"
          look-controls="pointerLockEnabled: true"></a-entity>
      </a-entity>


      <a-sphere position="4 3.25 -3" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="-1 3.75 3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>

      <!-- Ocean -->
<!--
      <a-ocean width="50" depth="50" density="40" opacity="1" position="0 0 0"></a-ocean>
-->

      <!-- Sky -->
      <a-sky color="#AADDF0"></a-sky>

      <!-- Lighting -->
      <a-light type="ambient" color="#ccc"></a-light>
      <a-light color="#ddf" distance="100" intensity="0.4" type="point"></a-light>
      <a-light color="#ddf" position="3 10 -10" distance="50" intensity="0.4" type="point"></a-light>

      <a-text id="text"
        value="Hello, World!"
        color="#333"
        position="1 6 4"
      ></a-text>
    </a-scene>

    <script>
     const rnd = (min, max) => Math.random()*(max-min) + min;
     const scene = document.getElementById('scene');
     const text = document.getElementById('text');

     const createBox = (scene, id, x, y, z) => {
       const newBox = document.createElement('a-box');
       newBox.setAttribute('position', `${x} ${y} ${z}`);
       newBox.setAttribute('rotation', '0 45 0');
       newBox.setAttribute('color', '#4c3cd9');
       newBox.setAttribute('id', id);
       newBox.setAttribute('data-fx', rnd(0,5));
       newBox.setAttribute('data-fy', rnd(0,5));
       newBox.setAttribute('data-fz', rnd(0,5));
       scene.appendChild(newBox);
       return newBox;
     }

//     box=createBox(scene, `box-22`, 1, 2, 4);

     const message = content => text.setAttribute('value', content);



     //   const nboxes = 200;
     //     const boxes = [];
     //     for (let i=0; i<nboxes; i++) {
     //       boxes[i] = createBox(scene, `box-${i}`, rnd(-10, 10), rnd(0, 10), rnd(-10, 10));
     //     };


     /*
        const turn = i => {
        for (let j=0; j<nboxes; j++) {
        fx = boxes[j].getAttribute('data-fx');
        fy = boxes[j].getAttribute('data-fy');
        fz = boxes[j].getAttribute('data-fz');
        boxes[j].setAttribute('rotation', `${fx*i} ${fy*i} ${fz*i}`);

        }
        message(`time: ${Math.round(i)}`);
        setTimeout(() => turn(i+.1), 10);
        };
        turn(1);
      */

     setup(10, 10, 10);

     const tick = i => {
       draw();
       message(`tick: ${i}`);
       setTimeout(() => tick(i+1), 1000);
     };

     tick(1);

    </script>
  </body>
</html>
